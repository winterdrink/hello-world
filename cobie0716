%% DAY1 : 200716

% addpath, rmpath, savepath, dir, num2cell, cell2mat, isequal, reshape,
% xlsread, readtable, str2num, num2str
% histogram, sprintf
%% addpath
% There are different data type in Matlab.
% Single, double, cell, string(character), and structure.

% about the adding path and removing path
addpath(pwd)
addpath(genpath(pwd)) 
rmpath(genpath(pwd)) % remove path
savepath  % keep the path

datdir = '/Users/dongjupark/Dropbox/summerintern_2020/data/tutorial_data/sess1';

cd '/Users/dongjupark/Dropbox/summerintern_2020/data/tutorial_data/sess1'
cd(datdir) % 18th = 19th, datdir = variable, you should put it btw () when you use it with function.

%% exercise
% structure
Byeol = []; % whos Byeol -> structure/double/cell/
Byeol.room1 = []; % Make space in Byeol's first room, that makes Byeol to struct
Byeol.room2 = [];
Byeol.room1 = 1:10; % Can we do this without cloumn 24th? or is there any different btw this and [1:10]?
Byeol.room2 = cell(3,5); % room 1 = double, you can see it directly, room2 = cell, you should go in it. Byeol is still a struct with size 1 by 1 -> How come?
Byeol.room2{2} = cell(3,5); % {2} = (2,1) of 3 by 5, in numerical number.
Byeol.room2{4} = cell(1,4) % {4} = (1, 2) of 3 by 5
Byeol.room2{16} = cell(1,4) % there's no 16th in 3 by 5,  Byeol.room2{4,1}=cell(1,4) makes room2 from 3 by 5 to 4 by 5
Byeol.room1(11) % there's only 10 elements in room1, so cannot find
Byeol.room1(11) = 11; % Though you can put things in it.
Byeol.room2{end} = 15; % last element makes 15, in 3 by 5 cell, it's (3,5)
Byeol.room2{end} % you can see last element with this.

clear Byeol

% you can clear specific variable(element?? clear Byeol.room1 doesn't work.) with this. If you put two %, it makes section from there.

% cell example
subjectdir = fullfile(datdir, '190705_JJW'); % ancient way... :) 

%cd .. change you directory to what it was before.
% cd(datdir) 愿��� ����硫� ����, 愿��� ����怨� �띠�쇰㈃ '�댁�� �� �ъ�댁�� �� �ｌ�댁�� ��' 

filelist = dir(datdir);
filenames = {filelist.name}'; % filelist.name �대�쇨�留� 移�硫� ans濡� �������� ����, 洹몃���� {} ��嫄� �댁＜怨�, �대�щ㈃ 媛�濡�濡� ���ㅻ��源� 移쇰�쇰깹�곕� 留��ㅻ�ㅻ㈃ 留�吏�留��� ' �댁�� transpose
filenames = filenames(3:end); % ����爰쇰��濡� ��硫� ��履� (�닿꼍�곕�� 2媛�)�� ., ..  ����
size(filenames)
numel(filenames)
whos filenames

% control z ��硫� 痍⑥��, control shift z�� 痍⑥���� 嫄� 痍⑥��
% cell type exercise
subjectdir = fullfile(datdir, filenames(1)); % 泥ル�吏� 爰� ����二쇈��
filelist_sub = dir(subjectdir);         % It would make an error. Do you get the reason? subjectdir = cell, must be a scalar or vector
filelist_sub = dir(string(subjectdir)); % because the input was cell not string
filelist_sub = dir(subjectdir(1));      % It would make an error. Do you get the reason?
filelist_sub = dir(subjectdir{1});      % It would make an error. Do you get the reason? ���� 以�愿���/��愿��� ���� �ㅻ�, 以�愿��� �곕㈃ �ъ���� ��, ��愿��� �곕㈃ �ㅽ�몃���, ���� 踰�寃�

newcell = filenames(1:5); % ��爰쇰��� 遺��ъ�� ��
% newcell = filenames{1:5}; �대��寃� ��硫� ans濡� 醫�醫�醫� ����, �ㅼ��媛� �대� 李얘� �띠�� 嫄곕�� �� ���� �ｌ�댁＜��
% 以�愿���

newcell = cell(2,5);
newcell(1:5) = filenames(1:5);  % not we intend, �몃�遺��� ������濡� ��
newcell(1,:) = filenames;       % error 1���� 紐⑤�� ��, filenames�� 50*1�대��濡� ��臾� 而ㅼ�� ���ㅼ�닿�
% commend + ���댄�� = ��源�吏� 泥���源�吏� ����洹�, �⑥�대�濡��� option

newcell = cell(2,5);
newcell(1,1:5) = filenames(1:5); % 泥� �댁��留� �ㅼ�닿�吏�
newcell(2,1:5) = filenames(6:10);

% how to use loop for this?
newcell = cell(2,5);
for i = 1:2
   for j = 1:5
       newcell(i,j) = filenames((i-1)*5+j, 1)
   end
end

% you should be careful using () {} with cell variables
newcell(1,:)
newcell{1,:}

newcell{1,1:5} = filenames{1:5};
sub1_ch = filenames{1};
sub1_cell = filenames(1);
whos sub1_ch
whos sub1_cell

% interchange between cell and double
b_idx = [1 2 3; 4 5 6; 7 8 9];
b_idx_cell = num2cell(b_idx);
b_idx_num = cell2mat(b_idx_cell);

new_idx = [4 5 6; 7 8 9; 1 2 3];
isequal(b_idx([2 3 1],:), new_idx)
new_idx = new_idx(:)';

x = 1:25;
reshape(x, 5, 5)'

% Let's make this!
%      0     0     0     0     0
%      0     1     2     3     0
%      0     4     5     6     0
%      0     7     8     9     0
%      0     0     0     0     0

expand_b = zeros(5,5);
for i = 1:size(b_idx,1)
    for j = 1:size(b_idx,2)

    end
end

%% load data
subjectdir = fullfile(datdir, filenames(1));

filelist = dir(datdir);
filenames = {filelist.name}';
filenames = filenames(4:end);

filelist_sub = dir(subjectdir{1});      

% string, character
subjectdir = fullfile(datdir, filenames{1});
filelist_sub = dir(subjectdir);
filenames_sub = {filelist_sub.name}'
s = size(filenames_sub,1);

%     {'.'                       }
%     {'..'                      }
%     {'BFI-10.xlsx'             }
%     {'CESD.xlsx'               }
%     {'KRRS.xlsx'               }
%     {'PANAS.xlsx'              }
%     {'STAI_T.xlsx'             }
%     {'personal_info.xlsx'      }  >>> what we need
%     {'suicide.xlsx'            }
%     {'survey_score.xlsx'       }
%     {'total_cost_times.xlsx'   }
%     {'wordset_with_rating.xlsx'}

if s == 12
    for i = 1:10
        [num{i},txt{i},raw{i}] = xlsread(fullfile(subjectdir, filenames_sub{i+2}));
    end
% elseif s ~= 12
%     blahblah
% else 
%     blahblah
end

str2num(txt{10}{160,3})+1           % string > double
num2str(str2num(txt{10}{160,3})+1)  % double > string

% for Mac
x = readtable(fullfile(subjectdir, filenames_sub{8}),'ReadVariableNames',false);
y = str2num(string(x{1,1}))
num2str(y)

clear num txt raw


%%
subject_num = 50;

% preallocation
age = zeros(subject_num,1);
sex = cell(subject_num,1);
edu = cell(subject_num,1);

% preallocation
sex_d2 = zeros(numel(sex),1);
edu_d2 = zeros(numel(edu),1);
edu_category = {'占쏙옙占쏙옙', '占쏙옙占싻깍옙占쏙옙占쏙옙', '占쏙옙占싻울옙占쏙옙占쏙옙', '占쏙옙占싻울옙占쏙옙占쏙옙'};

sex = string(x{2,1});

for i = 1:numel(sex)
    % sex 
    if strcmp(sex{i}, 'Female')
        sex_d2(i,1) = 1;
    elseif strcmp(sex{i}, 'Male')
        sex_d2(i,1) = 2;
    else
        warning(sprintf('Dose the subject-%02d have 3rd sex?.',i)) 
    end
        
    % edu
    if strcmp(edu{i}, edu_category{1})
        %%%
    end
end


%% histogram
% age
age = data.age;
figure;
counts = 10;
h = histogram(age, 'NumBins', counts);
h.BinLimits = [15 40];
title('distribution of age','FontSize',15)
xlabel('age','FontSize',15)
ylabel('counts','FontSize',15)
text(30, 10, sprintf('mean = %0.2f',mean(age)),'FontSize',15)
text(30, 9, sprintf('std = %0.2f',std(age)),'FontSize',15)
get(gcf, 'color', 'w')

set(gcf)
get(gcf, 'color', 'w', 'position', [])

% sprintf
sprintf('mean = %0.2f',mean(age))

% sex
sex_d = data.sex_double;
x = histcounts(sex_d);
figure;
c = categorical({'Female','Male'});
b = bar(c, x);
b.FaceColor = 'flat';
b.CData(1,:) = [0 .5 .5];
b.CData(2,:) = [.5 0 .5];
b.BarWidth = .5;
text(1, x(1)+1, num2str(x(1)))
text(2, x(2)+1, num2str(x(2)))



%% save
name = 'byeol';
savedir = '/Users/byeolkim/Dropbox/summerintern_2020/scripts/Week1';
savename = fullfile(savedir, sprintf('age_sex_education_n50_%s.mat',name));
save(savename, 'data','name');
load(savename)



%% For the next class (DAY2)
% Let's find out the distribution of age, sex, and education level of 50
% subjects.
% 
% age : 50x1 double
% sex : 50x1 cell (inside string)
% sex_double : 50x1 double
% education : 50x1 cell
% education_double : 50x1 double
% 
%%%%%%%%% Mission!! %%%%%%%%%%
% Find histogram, mean, standard deviation for age, sex_double, and
% education_double.
% You have to use for loop and if!
%
%   2-1 sex, education占쏙옙 占쏙옙占쏙옙檳占�. 'femal' & 'male' 占싱뤄옙占쏙옙. 
%   2-2. 占쏙옙 占쏙옙占쌍몌옙占쏙옙 占쏙옙占쏙옙 占쌕몌옙占쏙옙 占쌍어보占쏙옙
%   2-3. age占쏙옙 mean占쏙옙 std占쏙옙 표 占싫울옙 占쏙옙占쏙옙 占쏙옙 sprintf 占쏙옙 占싱울옙占싹울옙 占쌀쇽옙占쏙옙 2째占쌘몌옙占쏙옙占쏙옙占쏙옙 표占쏙옙占쌔븝옙占쏙옙.
%
% 3. 占싱뱄옙占쌍깍옙占쏙옙 占쏙옙占쏙옙 占쏙옙占쏙옙占쏙옙占쏙옙 占쏙옙티占� structure占쏙옙 占쏙옙占쏙옙底� mat占쏙옙 占쏙옙占쏙옙占싹깍옙 (占쏙옙占쏙옙 占쌘듸옙 占쏙옙占쏙옙)
% 4. figure占쏙옙 png占쏙옙 pdf 占쏙옙占싹뤄옙 占쏙옙占쏙옙占쌔븝옙占쏙옙. (占싱곤옙 占싯아쇽옙 찾占싣븝옙占쏙옙. 占쏙옙占� 占쏙옙占쏙옙占쏙옙 占쏙옙 占쏙옙占쏙옙占쏙옙 占싱몌옙占쏙옙 占쏙옙占쏙옙 占싱몌옙占쏙옙占쏙옙 占쏙옙占쏙옙 占쏙옙.)
%% DAY1 : 200716

% addpath, rmpath, savepath, dir, num2cell, cell2mat, isequal, reshape,
% xlsread, readtable, str2num, num2str
% histogram, sprintf
%% addpath
% There are different data type in Matlab.
% Single, double, cell, string(character), and structure.

% about the adding path and removing path
addpath(pwd)
addpath(genpath(pwd)) 
rmpath(genpath(pwd)) % �� 寃쎈� 鍮쇱�
savepath  % keep the path

datdir = '/Users/dongjupark/Dropbox/summerintern_2020/data/tutorial_data/sess1';

cd '/Users/dongjupark/Dropbox/summerintern_2020/data/tutorial_data/sess1'
cd(datdir) % datdir ������ �������쇰��源� �대��寃� �대�� ��

%% exercise
% structure
Byeol = []; % whos ��硫� 萸�吏� ���ㅼ�
Byeol.room1 = [];
Byeol.room2 = [];
Byeol.room1 = 1:10; % ��釉�
Byeol.room2 = cell(3,5); % 蹂��대�쇰�� �� �ㅽ�몃��爾��� ��釉��� ��怨� ���� ��怨� etc
Byeol.room2{2} = cell(3,5); %���� 2踰�吏� ���� �ｋ�� 寃�, room2瑜� �댁�대낫硫� 2,1���� �ㅼ�닿�����
Byeol.room2{4} = cell(1,4) % 1,2 ��由ъ�몃�� 4踰�吏몃�� {4}�쇨�留� ��硫� �닿� �ㅼ�닿�, �몃�濡�
Byeol.room2{16} = cell(1,4) % ���� 3 by 5, ���� 洹쇰�� Byeol.room2{4,1} ��硫� ��濡� ��源�!
Byeol.room1(11) % 遺��ъ�ㅻ��嫄� ����
Byeol.room1(11) = 11; % �ｋ��嫄� �� 
Byeol.room2{end} = 15; %媛��� ���� 媛��� ���� ������ �ｌ�댁�
Byeol.room2{end} % �ㅽ�몃��泥��� �� ���� 紐삳�ㅼ�닿�, �ㅽ�몃��泥� ������ �ㅼ�닿�

clear Byeol

% �ㅽ�щ┰�몄�� �ㅻ� ����留� ���대�� �뱀���� ������媛�, % ��媛�硫� �뱀���� ���� �� ����

% cell example
subjectdir = fullfile(datdir, '190705_JJW'); % ancient way... :) cd .. ��硫� 諛⑷� 諛�袁멸린 �� directory濡�
% cd(datdir) 愿��� ����硫� ����, 愿��� ����怨� �띠�쇰㈃ '�댁�� �� �ъ�댁�� �� �ｌ�댁�� ��' 

filelist = dir(datdir);
filenames = {filelist.name}'; % filelist.name �대�쇨�留� 移�硫� ans濡� �������� ����, 洹몃���� {} ��嫄� �댁＜怨�, �대�щ㈃ 媛�濡�濡� ���ㅻ��源� 移쇰�쇰깹�곕� 留��ㅻ�ㅻ㈃ 留�吏�留��� ' �댁�� transpose
filenames = filenames(3:end); % ����爰쇰��濡� ��硫� ��履� (�닿꼍�곕�� 2媛�)�� ., ..  ����
size(filenames)
numel(filenames)
whos filenames

% control z ��硫� 痍⑥��, control shift z�� 痍⑥���� 嫄� 痍⑥��
% cell type exercise
subjectdir = fullfile(datdir, filenames(1)); % 泥ル�吏� 爰� ����二쇈��
filelist_sub = dir(subjectdir);         % It would make an error. Do you get the reason? subjectdir = cell, must be a scalar or vector
filelist_sub = dir(string(subjectdir)); % because the input was cell not string
filelist_sub = dir(subjectdir(1));      % It would make an error. Do you get the reason?
filelist_sub = dir(subjectdir{1});      % It would make an error. Do you get the reason? ���� 以�愿���/��愿��� ���� �ㅻ�, 以�愿��� �곕㈃ �ъ���� ��, ��愿��� �곕㈃ �ㅽ�몃���, ���� 踰�寃�

newcell = filenames(1:5); % ��爰쇰��� 遺��ъ�� ��
% newcell = filenames{1:5}; �대��寃� ��硫� ans濡� 醫�醫�醫� ����, �ㅼ��媛� �대� 李얘� �띠�� 嫄곕�� �� ���� �ｌ�댁＜��
% 以�愿���

newcell = cell(2,5);
newcell(1:5) = filenames(1:5);  % not we intend, �몃�遺��� ������濡� ��
newcell(1,:) = filenames;       % error 1���� 紐⑤�� ��, filenames�� 50*1�대��濡� ��臾� 而ㅼ�� ���ㅼ�닿�
% commend + ���댄�� = ��源�吏� 泥���源�吏� ����洹�, �⑥�대�濡��� option

newcell = cell(2,5);
newcell(1,1:5) = filenames(1:5); % 泥� �댁��留� �ㅼ�닿�吏�
newcell(2,1:5) = filenames(6:10);

% how to use loop for this?
newcell = cell(2,5);
for i = 1:2
   for j = 1:5
       newcell(i,j) = filenames((i-1)*5+j, 1)
   end
end

% you should be careful using () {} with cell variables
newcell(1,:)
newcell{1,:}

newcell{1,1:5} = filenames{1:5};
sub1_ch = filenames{1};
sub1_cell = filenames(1);
whos sub1_ch
whos sub1_cell

% interchange between cell and double
b_idx = [1 2 3; 4 5 6; 7 8 9];
b_idx_cell = num2cell(b_idx);
b_idx_num = cell2mat(b_idx_cell);

new_idx = [4 5 6; 7 8 9; 1 2 3];
isequal(b_idx([2 3 1],:), new_idx)
new_idx = new_idx(:)';

x = 1:25;
reshape(x, 5, 5)'

% Let's make this!
%      0     0     0     0     0
%      0     1     2     3     0
%      0     4     5     6     0
%      0     7     8     9     0
%      0     0     0     0     0

expand_b = zeros(5,5);
for i = 1:size(b_idx,1)
    for j = 1:size(b_idx,2)

    end
end

%% load data
subjectdir = fullfile(datdir, filenames(1));

filelist = dir(datdir);
filenames = {filelist.name}';
filenames = filenames(4:end);

filelist_sub = dir(subjectdir{1});      

% string, character
subjectdir = fullfile(datdir, filenames{1});
filelist_sub = dir(subjectdir);
filenames_sub = {filelist_sub.name}'
s = size(filenames_sub,1);

%     {'.'                       }
%     {'..'                      }
%     {'BFI-10.xlsx'             }
%     {'CESD.xlsx'               }
%     {'KRRS.xlsx'               }
%     {'PANAS.xlsx'              }
%     {'STAI_T.xlsx'             }
%     {'personal_info.xlsx'      }  >>> what we need
%     {'suicide.xlsx'            }
%     {'survey_score.xlsx'       }
%     {'total_cost_times.xlsx'   }
%     {'wordset_with_rating.xlsx'}

if s == 12
    for i = 1:10
        [num{i},txt{i},raw{i}] = xlsread(fullfile(subjectdir, filenames_sub{i+2}));
    end
% elseif s ~= 12
%     blahblah
% else 
%     blahblah
end

str2num(txt{10}{160,3})+1           % string > double
num2str(str2num(txt{10}{160,3})+1)  % double > string

% for Mac
x = readtable(fullfile(subjectdir, filenames_sub{8}),'ReadVariableNames',false);
y = str2num(string(x{1,1}))
num2str(y)

clear num txt raw


%%
subject_num = 50;

% preallocation
age = zeros(subject_num,1);
sex = cell(subject_num,1);
edu = cell(subject_num,1);

% preallocation
sex_d2 = zeros(numel(sex),1);
edu_d2 = zeros(numel(edu),1);
edu_category = {'占쏙옙占쏙옙', '占쏙옙占싻깍옙占쏙옙占쏙옙', '占쏙옙占싻울옙占쏙옙占쏙옙', '占쏙옙占싻울옙占쏙옙占쏙옙'};

sex = string(x{2,1});

for i = 1:numel(sex)
    % sex 
    if strcmp(sex{i}, 'Female')
        sex_d2(i,1) = 1;
    elseif strcmp(sex{i}, 'Male')
        sex_d2(i,1) = 2;
    else
        warning(sprintf('Dose the subject-%02d have 3rd sex?.',i)) 
    end
        
    % edu
    if strcmp(edu{i}, edu_category{1})
        %%%
    end
end


%% histogram
% age
age = data.age;
figure;
counts = 10;
h = histogram(age, 'NumBins', counts);
h.BinLimits = [15 40];
title('distribution of age','FontSize',15)
xlabel('age','FontSize',15)
ylabel('counts','FontSize',15)
text(30, 10, sprintf('mean = %0.2f',mean(age)),'FontSize',15)
text(30, 9, sprintf('std = %0.2f',std(age)),'FontSize',15)
get(gcf, 'color', 'w')

set(gcf)
get(gcf, 'color', 'w', 'position', [])

% sprintf
sprintf('mean = %0.2f',mean(age))

% sex
sex_d = data.sex_double;
x = histcounts(sex_d);
figure;
c = categorical({'Female','Male'});
b = bar(c, x);
b.FaceColor = 'flat';
b.CData(1,:) = [0 .5 .5];
b.CData(2,:) = [.5 0 .5];
b.BarWidth = .5;
text(1, x(1)+1, num2str(x(1)))
text(2, x(2)+1, num2str(x(2)))



%% save
name = 'byeol';
savedir = '/Users/byeolkim/Dropbox/summerintern_2020/scripts/Week1';
savename = fullfile(savedir, sprintf('age_sex_education_n50_%s.mat',name));
save(savename, 'data','name');
load(savename)



%% For the next class (DAY2)
% Let's find out the distribution of age, sex, and education level of 50
% subjects.
% 
% age : 50x1 double
% sex : 50x1 cell (inside string)
% sex_double : 50x1 double
% education : 50x1 cell
% education_double : 50x1 double
% 
%%%%%%%%% Mission!! %%%%%%%%%%
% Find histogram, mean, standard deviation for age, sex_double, and
% education_double.
% You have to use for loop and if!
%
%   2-1 sex, education占쏙옙 占쏙옙占쏙옙檳占�. 'femal' & 'male' 占싱뤄옙占쏙옙. 
%   2-2. 占쏙옙 占쏙옙占쌍몌옙占쏙옙 占쏙옙占쏙옙 占쌕몌옙占쏙옙 占쌍어보占쏙옙
%   2-3. age占쏙옙 mean占쏙옙 std占쏙옙 표 占싫울옙 占쏙옙占쏙옙 占쏙옙 sprintf 占쏙옙 占싱울옙占싹울옙 占쌀쇽옙占쏙옙 2째占쌘몌옙占쏙옙占쏙옙占쏙옙 표占쏙옙占쌔븝옙占쏙옙.
%
% 3. 占싱뱄옙占쌍깍옙占쏙옙 占쏙옙占쏙옙 占쏙옙占쏙옙占쏙옙占쏙옙 占쏙옙티占� structure占쏙옙 占쏙옙占쏙옙底� mat占쏙옙 占쏙옙占쏙옙占싹깍옙 (占쏙옙占쏙옙 占쌘듸옙 占쏙옙占쏙옙)
% 4. figure占쏙옙 png占쏙옙 pdf 占쏙옙占싹뤄옙 占쏙옙占쏙옙占쌔븝옙占쏙옙. (占싱곤옙 占싯아쇽옙 찾占싣븝옙占쏙옙. 占쏙옙占� 占쏙옙占쏙옙占쏙옙 占쏙옙 占쏙옙占쏙옙占쏙옙 占싱몌옙占쏙옙 占쏙옙占쏙옙 占싱몌옙占쏙옙占쏙옙 占쏙옙占쏙옙 占쏙옙.)
